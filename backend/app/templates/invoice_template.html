<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Invoice {{ invoice.invoice_number }}</title>
    <style>
      @page {
        size: letter;
        margin: 0;
      }

      :root {
        --brand-primary: #e85d24;
        --brand-secondary: #f47b20;
        --brand-light: #fef3ee;
        --brand-lighter: #fff8f5;
        --brand-dark: #c94d1a;
        --brand-accent: #ff6b35;
        --text-primary: #1a1a1a;
        --text-secondary: #525252;
        --text-muted: #737373;
        --border-color: #e5e5e5;
        --bg-subtle: #fafafa;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", "SF Pro Display", -apple-system,
          BlinkMacSystemFont, sans-serif;
        line-height: 1.5;
        color: var(--text-primary);
        background: #ffffff;
        font-size: 11px;
      }

      .invoice-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 40px;
      }

      /* Header with gradient accent */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 40px;
        padding-bottom: 30px;
        border-bottom: 1px solid var(--border-color);
        position: relative;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -40px;
        left: -40px;
        right: -40px;
        height: 6px;
        background: linear-gradient(
          90deg,
          var(--brand-primary) 0%,
          var(--brand-secondary) 50%,
          var(--brand-accent) 100%
        );
      }

      .company-branding {
        display: flex;
        align-items: flex-start;
        gap: 16px;
      }

      .logo-container {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo-container img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
      }

      /* Fallback logo style if image not available */
      .logo-fallback {
        width: 56px;
        height: 56px;
        background: linear-gradient(
          135deg,
          var(--brand-primary) 0%,
          var(--brand-secondary) 100%
        );
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(232, 93, 36, 0.3);
      }

      .logo-fallback svg {
        width: 32px;
        height: 32px;
        fill: white;
      }

      .company-info {
        color: var(--text-muted);
        font-size: 10px;
        line-height: 1.6;
      }

      .company-name {
        font-size: 20px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 4px;
        letter-spacing: -0.5px;
      }

      .company-tagline {
        font-size: 10px;
        color: var(--brand-primary);
        font-weight: 600;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .document-header {
        text-align: right;
      }

      .invoice-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        background: linear-gradient(
          135deg,
          var(--brand-light) 0%,
          var(--brand-lighter) 100%
        );
        border: 1px solid rgba(232, 93, 36, 0.2);
        border-radius: 10px;
        margin-bottom: 12px;
      }

      .invoice-label {
        font-size: 10px;
        font-weight: 600;
        color: var(--brand-primary);
        text-transform: uppercase;
        letter-spacing: 1.5px;
      }

      .invoice-number {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-primary);
        font-family: "SF Mono", "Consolas", monospace;
      }

      .status-badge {
        display: inline-block;
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .status-unpaid {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        color: #92400e;
        border: 1px solid #f59e0b;
      }
      .status-partial {
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        color: #1e40af;
        border: 1px solid #3b82f6;
      }
      .status-paid {
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        color: #065f46;
        border: 1px solid #10b981;
      }
      .status-overdue {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        color: #991b1b;
        border: 1px solid #ef4444;
      }

      /* Two Column Layout */
      .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
        margin-bottom: 35px;
      }

      .info-card {
        background: var(--bg-subtle);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid var(--border-color);
      }

      .info-card-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 14px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--border-color);
      }

      .info-card-icon {
        width: 32px;
        height: 32px;
        background: linear-gradient(
          135deg,
          var(--brand-primary) 0%,
          var(--brand-secondary) 100%
        );
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(232, 93, 36, 0.25);
      }

      .info-card-icon svg {
        width: 16px;
        height: 16px;
        fill: none;
        stroke: white;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .info-card-title {
        font-size: 11px;
        font-weight: 700;
        color: var(--brand-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .client-name {
        font-size: 15px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 8px;
      }

      .client-details {
        color: var(--text-secondary);
        font-size: 11px;
        line-height: 1.8;
      }

      .detail-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px dashed #e0e0e0;
      }

      .detail-row:last-child {
        border-bottom: none;
      }

      .detail-label {
        color: var(--text-muted);
        font-size: 11px;
      }

      .detail-value {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 11px;
      }

      /* Items Table */
      .items-section {
        margin-bottom: 30px;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
      }

      .section-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(
          135deg,
          var(--brand-primary) 0%,
          var(--brand-secondary) 100%
        );
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 3px 10px rgba(232, 93, 36, 0.3);
      }

      .section-icon svg {
        width: 18px;
        height: 18px;
        fill: none;
        stroke: white;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .section-title {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-primary);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
      }

      thead {
        background: linear-gradient(
          135deg,
          var(--brand-primary) 0%,
          var(--brand-dark) 100%
        );
      }

      th {
        color: white;
        padding: 14px 16px;
        text-align: left;
        font-weight: 600;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      th:first-child {
        border-radius: 10px 0 0 0;
      }

      th:last-child {
        border-radius: 0 10px 0 0;
      }

      tbody tr {
        background: #ffffff;
        border-bottom: 1px solid #f0f0f0;
        transition: background-color 0.2s ease;
      }

      tbody tr:nth-child(even) {
        background: var(--bg-subtle);
      }

      tbody tr:last-child {
        border-bottom: none;
      }

      td {
        padding: 14px 16px;
        font-size: 11px;
      }

      .item-name {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 3px;
      }

      .item-description {
        color: var(--text-muted);
        font-size: 10px;
      }

      .item-code {
        display: inline-block;
        padding: 3px 8px;
        background: var(--brand-light);
        color: var(--brand-dark);
        border-radius: 4px;
        font-size: 9px;
        font-family: "SF Mono", "Consolas", monospace;
        margin-top: 5px;
        font-weight: 600;
      }

      .text-right {
        text-align: right;
      }

      .text-center {
        text-align: center;
      }

      /* Totals Section */
      .totals-wrapper {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 30px;
      }

      .totals-card {
        width: 320px;
        background: linear-gradient(135deg, var(--bg-subtle) 0%, #f5f5f5 100%);
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid var(--border-color);
      }

      .totals-row {
        display: flex;
        justify-content: space-between;
        padding: 12px 20px;
        border-bottom: 1px solid var(--border-color);
      }

      .totals-row:last-child {
        border-bottom: none;
      }

      .totals-label {
        color: var(--text-secondary);
        font-size: 11px;
      }

      .totals-value {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 11px;
        font-family: "SF Mono", "Consolas", monospace;
      }

      .totals-total {
        background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
      }

      .totals-total .totals-label,
      .totals-total .totals-value {
        color: white;
        font-size: 12px;
      }

      .totals-due {
        background: linear-gradient(
          135deg,
          var(--brand-primary) 0%,
          var(--brand-dark) 100%
        );
      }

      .totals-due .totals-label,
      .totals-due .totals-value {
        color: white;
        font-size: 14px;
        font-weight: 700;
      }

      /* Payment Info */
      .payment-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      .payment-card {
        background: linear-gradient(
          135deg,
          var(--brand-light) 0%,
          var(--brand-lighter) 100%
        );
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(232, 93, 36, 0.15);
      }

      .payment-card-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        font-weight: 700;
        color: var(--brand-dark);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 14px;
      }

      .payment-card-title svg {
        width: 16px;
        height: 16px;
        fill: none;
        stroke: var(--brand-primary);
        stroke-width: 2;
      }

      .payment-method {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: white;
        border-radius: 10px;
        margin-bottom: 10px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .payment-method:last-of-type {
        margin-bottom: 0;
      }

      .payment-method-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 6px rgba(34, 197, 94, 0.3);
      }

      .payment-method-icon svg {
        width: 20px;
        height: 20px;
        fill: none;
        stroke: white;
        stroke-width: 2;
      }

      .payment-method-icon.bank {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
      }

      .payment-method-details {
        flex: 1;
      }

      .payment-method-name {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 11px;
        margin-bottom: 2px;
      }

      .payment-method-value {
        color: var(--text-muted);
        font-size: 12px;
        font-family: "SF Mono", "Consolas", monospace;
        font-weight: 600;
      }

      /* Payment History */
      .history-card {
        background: var(--bg-subtle);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid var(--border-color);
      }

      .history-table {
        font-size: 10px;
        box-shadow: none;
      }

      .history-table th {
        background: #e5e5e5;
        color: var(--text-secondary);
        padding: 10px 12px;
        font-size: 9px;
      }

      .history-table th:first-child {
        border-radius: 6px 0 0 0;
      }

      .history-table th:last-child {
        border-radius: 0 6px 0 0;
      }

      .history-table td {
        padding: 10px 12px;
        font-size: 10px;
      }

      /* Notes Section */
      .notes-section {
        background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #fde047;
        margin-bottom: 30px;
      }

      .notes-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        font-weight: 700;
        color: #854d0e;
        margin-bottom: 10px;
      }

      .notes-title svg {
        width: 16px;
        height: 16px;
        fill: none;
        stroke: #ca8a04;
        stroke-width: 2;
      }

      .notes-content {
        color: #713f12;
        font-size: 11px;
        line-height: 1.7;
      }

      /* Footer */
      .footer {
        margin-top: 40px;
        padding-top: 24px;
        border-top: 1px solid var(--border-color);
      }

      .footer-message {
        text-align: center;
        margin-bottom: 24px;
        padding: 20px;
        background: linear-gradient(
          135deg,
          var(--brand-light) 0%,
          var(--brand-lighter) 100%
        );
        border-radius: 12px;
        border: 1px solid rgba(232, 93, 36, 0.15);
      }

      .thank-you-text {
        font-size: 18px;
        font-weight: 700;
        background: linear-gradient(
          90deg,
          var(--brand-primary),
          var(--brand-secondary),
          var(--brand-accent)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 6px;
      }

      .footer-tagline {
        font-size: 11px;
        color: var(--text-muted);
      }

      .footer-details {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 16px;
      }

      .footer-company {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .footer-logo {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .footer-logo img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
      }

      .footer-company-name {
        font-size: 12px;
        font-weight: 700;
        color: var(--text-primary);
      }

      .footer-website {
        font-size: 10px;
        color: var(--brand-primary);
        font-weight: 500;
      }

      .footer-meta {
        text-align: right;
        font-size: 9px;
        color: var(--text-muted);
      }

      .powered-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        background: linear-gradient(
          135deg,
          var(--brand-light) 0%,
          var(--brand-lighter) 100%
        );
        border-radius: 16px;
        font-size: 9px;
        font-weight: 600;
        color: var(--brand-dark);
        margin-top: 8px;
        border: 1px solid rgba(232, 93, 36, 0.2);
      }

      .powered-badge svg {
        width: 12px;
        height: 12px;
        fill: none;
        stroke: var(--brand-primary);
        stroke-width: 2;
      }

      /* QR Code section */
      .qr-section {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px;
        background: white;
        border-radius: 10px;
        margin-top: 14px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .qr-placeholder {
        width: 56px;
        height: 56px;
        background: linear-gradient(135deg, #f0f0f0 0%, #e5e5e5 100%);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .qr-placeholder svg {
        width: 28px;
        height: 28px;
        fill: #a3a3a3;
      }

      .qr-text {
        flex: 1;
      }

      .qr-title {
        font-size: 11px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 3px;
      }

      .qr-description {
        font-size: 9px;
        color: var(--text-muted);
        line-height: 1.4;
      }

      /* Empty state */
      .empty-state {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 30px 20px;
      }

      .empty-state svg {
        width: 48px;
        height: 48px;
        fill: none;
        stroke: #d4d4d4;
        stroke-width: 1.5;
        margin-bottom: 12px;
      }

      .empty-state-title {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        margin-bottom: 4px;
      }

      .empty-state-desc {
        font-size: 10px;
        color: #a3a3a3;
      }
    </style>
  </head>
  <body>
    <div class="invoice-container">
      <!-- Header -->
      <div class="header">
        <div class="company-branding">
          <div class="logo-container">
            <!-- Replace src with actual logo path -->
            <img src="{{ company.logo_url or 'simbalogo.png' }}" alt="" />
          </div>
          <div>
            <div class="company-name">{{ company.name }}</div>
            <div class="company-tagline">{{ company.trade }}</div>
            <div class="company-info">
              {{ company.address }}<br />
              {{ company.city }}<br />
              {{ company.phone }} â€¢ {{ company.email }}<br />
              Tax ID: {{ company.tax_id }}
            </div>
          </div>
        </div>

        <div class="document-header">
          <div class="invoice-badge">
            <div>
              <div class="invoice-label">Invoice</div>
              <div class="invoice-number">{{ invoice.invoice_number }}</div>
            </div>
          </div>
          <br />
          <span class="status-badge status-{{ invoice.status.value.lower() }}">
            {{ invoice.status.value }}
          </span>
        </div>
      </div>

      <!-- Info Grid -->
      <div class="info-grid">
        <div class="info-card">
          <div class="info-card-header">
            <div class="info-card-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
            </div>
            <span class="info-card-title">Bill To</span>
          </div>
          <div class="client-name">{{ invoice.account.name }}</div>
          <div class="client-details">
            {% if invoice.contact %} Attn: {{ invoice.contact.full_name }}<br />
            {{ invoice.contact.phone }}<br />
            {{ invoice.contact.email }}<br />
            {% endif %} {% if invoice.account.billing_address %} {{
            invoice.account.billing_address }} {% endif %}
          </div>
        </div>

        <div class="info-card">
          <div class="info-card-header">
            <div class="info-card-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
              </svg>
            </div>
            <span class="info-card-title">Invoice Details</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Issue Date</span>
            <span class="detail-value">{{ invoice.issue_date|date }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Due Date</span>
            <span class="detail-value">{{ invoice.due_date|date }}</span>
          </div>
          {% if invoice.paid_date %}
          <div class="detail-row">
            <span class="detail-label">Paid Date</span>
            <span class="detail-value">{{ invoice.paid_date|date }}</span>
          </div>
          {% endif %} {% if invoice.quote_id %}
          <div class="detail-row">
            <span class="detail-label">Quote Reference</span>
            <span class="detail-value">{{ invoice.quote.quote_number }}</span>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Items Section -->
      <div class="items-section">
        <div class="section-header">
          <div class="section-icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
              />
              <polyline points="3.27 6.96 12 12.01 20.73 6.96" />
              <line x1="12" y1="22.08" x2="12" y2="12" />
            </svg>
          </div>
          <span class="section-title">Products & Services</span>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 45%">Description</th>
              <th class="text-center" style="width: 12%">Qty</th>
              <th class="text-right" style="width: 15%">Unit Price</th>
              <th class="text-center" style="width: 12%">Discount</th>
              <th class="text-right" style="width: 16%">Amount</th>
            </tr>
          </thead>
          <tbody>
            {% for item in invoice.items %}
            <tr>
              <td>
                <div class="item-name">{{ item.product.name }}</div>
                <div class="item-description">{{ item.description }}</div>
                {% if item.product.sku %}
                <span class="item-code">SKU: {{ item.product.sku }}</span>
                {% endif %}
              </td>
              <td class="text-center">{{ item.quantity }}</td>
              <td class="text-right">{{ item.unit_price|currency }}</td>
              <td class="text-center">{{ item.discount_percentage }}%</td>
              <td class="text-right">
                <strong>{{ item.total|currency }}</strong>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Totals -->
      <div class="totals-wrapper">
        <div class="totals-card">
          <div class="totals-row">
            <span class="totals-label">Subtotal</span>
            <span class="totals-value"
              >KES {{ invoice.subtotal|currency }}</span
            >
          </div>
          {% if invoice.discount_amount > 0 %}
          <div class="totals-row">
            <span class="totals-label">Discount</span>
            <span class="totals-value"
              >- {{ invoice.discount_amount|currency }}</span
            >
          </div>
          {% endif %}
          <div class="totals-row">
            <span class="totals-label">Tax ({{ invoice.tax_rate }}%)</span>
            <span class="totals-value">{{ invoice.tax_amount|currency }}</span>
          </div>
          <div class="totals-row totals-total">
            <span class="totals-label">Total</span>
            <span class="totals-value"
              >KES {{ invoice.total_amount|currency }}</span
            >
          </div>
          {% if invoice.amount_paid > 0 %}
          <div class="totals-row">
            <span class="totals-label">Amount Paid</span>
            <span class="totals-value"
              >- KES {{ invoice.amount_paid|currency }}</span
            >
          </div>
          {% endif %}
          <div class="totals-row totals-due">
            <span class="totals-label">Amount Due</span>
            <span class="totals-value"
              >KES {{ invoice.amount_due|currency }}</span
            >
          </div>
        </div>
      </div>

      <!-- Payment Section -->
      <div class="payment-section">
        <div class="payment-card">
          <div class="payment-card-title">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
              <line x1="1" y1="10" x2="23" y2="10" />
            </svg>
            Payment Methods
          </div>
          <div class="payment-method">
            <div class="payment-method-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <rect x="5" y="2" width="14" height="20" rx="2" ry="2" />
                <line x1="12" y1="18" x2="12.01" y2="18" />
              </svg>
            </div>
            <div class="payment-method-details">
              <div class="payment-method-name">M-PESA Paybill</div>
              <div class="payment-method-value">542542</div>
            </div>
          </div>
          <div class="payment-method">
            <div class="payment-method-icon bank">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                <line x1="1" y1="10" x2="23" y2="10" />
              </svg>
            </div>
            <div class="payment-method-details">
              <div class="payment-method-name">Account Number</div>
              <div class="payment-method-value">00103761776350</div>
            </div>
          </div>

          <!-- QR Code Section -->
          <!-- <div class="qr-section">
                    <div class="qr-placeholder">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                            <rect x="14" y="14" width="3" height="3"/>
                            <rect x="18" y="18" width="3" height="3"/>
                        </svg>
                    </div>
                    <div class="qr-text">
                        <div class="qr-title">Scan to Pay</div>
                        <div class="qr-description">Use your mobile banking app to scan and pay instantly</div>
                    </div>
                </div> -->
        </div>

        {% if invoice.payments %}
        <div class="history-card">
          <div class="payment-card-title" style="color: var(--text-secondary)">
            <svg
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
              style="stroke: var(--text-muted)"
            >
              <circle cx="12" cy="12" r="10" />
              <polyline points="12 6 12 12 16 14" />
            </svg>
            Payment History
          </div>
          <table class="history-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Method</th>
                <th>Reference</th>
                <th class="text-right">Amount</th>
              </tr>
            </thead>
            <tbody>
              {% for payment in invoice.payments %}
              <tr>
                <td>{{ payment.payment_date|date }}</td>
                <td>{{ payment.payment_method.value }}</td>
                <td style="font-family: 'SF Mono', 'Consolas', monospace">
                  {{ payment.reference_number or payment.payment_number }}
                </td>
                <td class="text-right">
                  <strong>{{ payment.amount|currency }}</strong>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div class="history-card empty-state">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 6 12 12 16 14" />
          </svg>
          <div class="empty-state-title">No Payments Yet</div>
          <div class="empty-state-desc">
            Payments will appear here once processed
          </div>
        </div>
        {% endif %}
      </div>

      {% if invoice.notes %}
      <!-- Notes Section -->
      <div class="notes-section">
        <div class="notes-title">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            />
            <polyline points="14 2 14 8 20 8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <polyline points="10 9 9 9 8 9" />
          </svg>
          Notes
        </div>
        <div class="notes-content">{{ invoice.notes }}</div>
      </div>
      {% endif %}

      <!-- Footer -->
      <div class="footer">
        <div class="footer-message">
          <div class="thank-you-text">Thank You for Your Business!</div>
          <div class="footer-tagline">
            We appreciate your trust in {{ company.name }} for your ICT
            solutions
          </div>
        </div>

        <div class="footer-details">
          <div class="footer-company">
            <div class="footer-logo">
              <img src="{{ company.logo_url or 'simbalogo.png' }}" alt="" />
            </div>
            <div>
              <div class="footer-company-name">{{ company.name }}</div>
              <div class="footer-website">{{ company.website }}</div>
            </div>
          </div>

          <div class="footer-meta">
            <div>Generated {{ generated_date|datetime }}</div>
            <div class="powered-badge">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
              </svg>
              Powered by SimbaPOS
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
